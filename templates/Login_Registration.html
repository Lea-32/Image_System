<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login | ImageFlow</title>
    <meta name="keywords" content="ImageFlow, Login, Organize, Discover" />
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
</head>

<body class="bg-gray-50">

    <!-- 头部导航 -->
    <header class="bg-white shadow-md">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4">
                <h1 class="text-2xl font-bold text-indigo-600">ImageFlow</h1>
                <nav class="space-x-4">
                    <a href="#contact" class="text-gray-600 hover:text-indigo-600">联系我们</a>
                    <a href="#" class="text-gray-600 hover:text-indigo-600">找回密码</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- 登录表单 -->
    <main class="min-h-screen flex items-center justify-center py-8">
        <div class="max-w-md w-full bg-white shadow-lg rounded-lg p-6">
            <h2 class="text-3xl font-semibold text-center text-indigo-600 mb-6">登录</h2>
            <form action="{{ url_for('login.login') }}" method="POST">
                <!-- 用户名输入 -->
                <div class="mb-4">
                    <label for="username" class="block text-gray-600">用户名</label>
                    <input type="text" name="Name" id="username" class="mt-1 block w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-600" placeholder="请输入用户名" required>
                </div>

                <!-- 密码输入 -->
                <div class="mb-6">
                    <label for="password" class="block text-gray-600">密码</label>
                    <input type="password" name="Password" id="password" class="mt-1 block w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-600" placeholder="请输入密码" required>
                </div>

                <!-- 记住我复选框 -->
                <div class="flex items-center mb-4">
                    <input type="checkbox" name="checkbox" class="h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-600" id="remember-me">
                    <label for="remember-me" class="ml-2 text-gray-600">记住我</label>
                </div>

                <!-- 登录按钮 -->
                <button type="submit" class="w-full bg-indigo-600 text-white py-3 rounded-md hover:bg-indigo-700">登录</button>
            </form>

            <!-- 错误提示信息 -->
				<div id="error-message" class="mt-4 text-red-500 text-center hidden">
					<p>用户名或密码无效，请重试。</p>
				</div>


            <!-- 注册链接 -->
            <div class="mt-4 text-center">
                <a href="#register-modal" class="text-indigo-600 hover:text-indigo-700" id="open-register-modal">没有账户? 注册</a>
            </div>
        </div>
    </main>

    <!-- 注册弹出框 -->
    <div id="register-modal" class="fixed inset-0 bg-gray-500 bg-opacity-75 z-50 hidden">
        <div class="flex items-center justify-center min-h-screen">
            <div class="bg-white p-6 rounded-lg shadow-lg w-96">
                <h2 class="text-3xl font-semibold text-center text-indigo-600 mb-6">注册</h2>
                <form action="{{ url_for('register.register') }}" method="POST">
                    <!-- 用户名输入 -->
                    <div class="mb-4">
                        <label for="register-username" class="block text-gray-600">用户名</label>
                        <input type="text" name="Name" id="register-username" class="mt-1 block w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-600" placeholder="请输入用户名" required>
                    </div>

                    <!-- 密码输入 -->
					<div class="mb-4">
						<label for="register-password" class="block text-gray-600">密码</label>
						<input type="password" name="Password" id="register-password" class="mt-1 block w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-600" placeholder="请输入密码" required>
					</div>

					<!-- 确认密码 -->
					<div class="mb-6">
						<label for="confirm-password" class="block text-gray-600">确认密码</label>
						<input type="password" name="ConfirmPassword" id="confirm-password" class="mt-1 block w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-600" placeholder="确认密码" required>
						<!-- 添加错误提示 -->
						<p id="password-error" class="text-red-500 text-sm hidden">两次密码输入不一致，请重新输入。</p>
					</div>

                    <!-- 邮箱输入 -->
                    <div class="mb-6">
                        <label for="register-email" class="block text-gray-600">邮箱</label>
                        <input type="email" name="Email" id="register-email" class="mt-1 block w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-600" placeholder="请输入邮箱" required>
                    </div>

                    <!-- 同意隐私政策 -->
                    <div class="flex items-center mb-6">
                        <input type="checkbox" name="checkbox" class="h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-600" id="agree-privacy">
                        <label for="agree-privacy" class="ml-2 text-gray-600">我同意 <a href="#" class="text-indigo-600 hover:text-indigo-700">隐私政策</a></label>
                    </div>

                    <!-- 注册按钮 -->
                    <button type="submit" class="w-full bg-indigo-600 text-white py-3 rounded-md hover:bg-indigo-700">注册</button>
                </form>

                <!-- 关闭按钮 -->
                <div class="mt-4 text-center">
                    <button id="close-register-modal" class="text-indigo-600 hover:text-indigo-700">关闭</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 联系我们模块 -->
    <section id="contact" class="bg-gray-100 py-16">
        <div class="max-w-7xl mx-auto px-6 lg:px-8">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-indigo-600">联系我们</h2>
                <p class="text-lg text-gray-600 mt-2">如果您有任何问题或反馈，请通过以下方式联系我们。</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="p-6 bg-white shadow-lg rounded-lg">
                    <h3 class="text-xl font-semibold text-gray-800">电子邮件</h3>
                    <p class="text-gray-600 mt-2">support@imageflow.com</p>
                </div>
                <div class="p-6 bg-white shadow-lg rounded-lg">
                    <h3 class="text-xl font-semibold text-gray-800">电话</h3>
                    <p class="text-gray-600 mt-2">+123 456 7890</p>
                </div>
            </div>
        </div>
    </section>

    <footer class="bg-gray-800 text-white py-6">
        <div class="max-w-7xl mx-auto text-center">
            <p>&copy; 2025 ImageFlow. All rights reserved.</p>
        </div>
    </footer>


	<!-- 底部的脚本部分 -->
	<script>
	document.addEventListener("DOMContentLoaded", function () {
		// 监听注册表单提交事件
		document.querySelector("#register-modal form").addEventListener("submit", function (event) {
			var password = document.getElementById("register-password").value;
			var confirmPassword = document.getElementById("confirm-password").value;
			var errorMessage = document.getElementById("password-error");

			// 检查密码是否一致
			if (password !== confirmPassword) {
				event.preventDefault(); // 阻止表单提交
				errorMessage.classList.remove("hidden"); // 显示错误信息
			} else {
				errorMessage.classList.add("hidden"); // 隐藏错误信息
			}
		});
	});
		// 监听登录表单提交事件
	document.querySelector("form").addEventListener("submit", function (event) {
		var username = document.getElementById("username").value;
		var password = document.getElementById("password").value;
		var errorMessage = document.getElementById("error-message");

		// 检查用户名和密码是否有效（假设此逻辑你已经有处理，或者模拟验证）
		if (username === "" || password === "") {
			event.preventDefault(); // 阻止表单提交
			errorMessage.classList.remove("hidden"); // 显示错误信息
		} else {
			errorMessage.classList.add("hidden"); // 隐藏错误信息
		}
	});

    <!-- 注册弹出框的JS -->
        // 显示注册弹出框
        document.getElementById("open-register-modal").addEventListener("click", function() {
            document.getElementById("register-modal").classList.remove("hidden");
        });

        // 关闭注册弹出框
        document.getElementById("close-register-modal").addEventListener("click", function() {
            document.getElementById("register-modal").classList.add("hidden");
        });

        $(document).ready(function() {
            {% if login_failed %}
                $('#error-message').removeClass('hidden');
            {% endif %}
        });
    </script>
</body>

</html>
